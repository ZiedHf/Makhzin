-- MySQL Script generated by MySQL Workbench
-- 06/04/16 12:11:05
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema DSD
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema DSD
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `DSD` DEFAULT CHARACTER SET utf8 ;
USE `DSD` ;

-- -----------------------------------------------------
-- Table `DSD`.`users`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`users` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `username` VARCHAR(50) NOT NULL,
  `password` VARCHAR(255) NOT NULL,
  `role` VARCHAR(50) NULL,
  `enable` INT NULL DEFAULT 1,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `products` INT NULL DEFAULT 0,
  `categories` INT NULL DEFAULT 0,
  `providers` INT NULL DEFAULT 0,
  `stocks` INT NULL DEFAULT 0,
  `movements` INT NULL DEFAULT 0,
  `clients` INT NULL DEFAULT 0,
  `lots` INT NULL DEFAULT 0,
  `zones` INT NULL DEFAULT 0,
  `files` INT NULL DEFAULT 0,
  `inputs` INT NULL DEFAULT 0,
  `documents` INT NULL DEFAULT 0,
  `outputSets` INT NULL DEFAULT 0,
  `required_docs` INT NULL DEFAULT 0,
  `outputs` INT NULL DEFAULT 0,
  `users` INT NULL DEFAULT 0,
  `dependencies` INT NULL DEFAULT 0,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_users_users1_idx` (`created_by` ASC),
  INDEX `FK_users_users2_idx` (`modified_by` ASC),
  CONSTRAINT `FK_users_users1`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE SET NULL
    ON UPDATE SET NULL,
  CONSTRAINT `FK_users_users2`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE SET NULL
    ON UPDATE SET NULL)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`stocks`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`stocks` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `amount` DOUBLE NULL,
  `unitQte` DOUBLE NULL,
  `unit` VARCHAR(10) NULL,
  `product_id` INT NOT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_stocks_products_idx` (`product_id` ASC),
  INDEX `FK_stocks_users_idx` (`created_by` ASC),
  INDEX `FK_stocks_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_stocks_products`
    FOREIGN KEY (`product_id`)
    REFERENCES `DSD`.`products` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_stocks_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_stocks_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`zones`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`zones` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(256) NULL,
  `subjectToQuota` TINYINT(1) NULL,
  `quota` DOUBLE NOT NULL,
  `tolerance` DOUBLE NULL DEFAULT 0,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_zones_users_idx` (`created_by` ASC),
  INDEX `FK_zones_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_zones_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_zones_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`products`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`products` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(256) NOT NULL,
  `productCode` VARCHAR(20) NOT NULL,
  `ngpCode` VARCHAR(20) NOT NULL,
  `barCode` VARCHAR(20) NOT NULL,
  `subjectToQuota` TINYINT(1) NOT NULL DEFAULT 0,
  `quota` DOUBLE NULL,
  `tolerance` DOUBLE NULL DEFAULT 0,
  `approved` TINYINT(1) NULL DEFAULT 1,
  `emballage` VARCHAR(256) NULL,
  `unitQte` DOUBLE NULL,
  `unit` VARCHAR(10) NULL,
  `stock_id` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `zone_id` INT NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_products_stocks_idx` (`stock_id` ASC),
  INDEX `FK_products_zones_idx` (`zone_id` ASC),
  INDEX `FK_products_users_idx` (`created_by` ASC),
  INDEX `FK_products_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_products_stocks`
    FOREIGN KEY (`stock_id`)
    REFERENCES `DSD`.`stocks` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_products_zones`
    FOREIGN KEY (`zone_id`)
    REFERENCES `DSD`.`zones` (`id`)
    ON DELETE SET NULL
    ON UPDATE SET NULL,
  CONSTRAINT `FK_products_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_products_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`categories`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`categories` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(256) NOT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_categories_users_idx` (`created_by` ASC),
  INDEX `FK_categories_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_categories_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_categories_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`clients`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`clients` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(256) NOT NULL,
  `matriculeFiscale` VARCHAR(45) NULL,
  `code` VARCHAR(45) NULL,
  `approved` TINYINT(1) NULL DEFAULT 1,
  `adress` VARCHAR(45) NULL,
  `email1` VARCHAR(45) NULL,
  `email2` VARCHAR(45) NULL,
  `email3` VARCHAR(45) NULL,
  `tel1` VARCHAR(45) NULL,
  `tel2` VARCHAR(45) NULL,
  `tel3` VARCHAR(45) NULL,
  `fax1` VARCHAR(45) NULL,
  `fax2` VARCHAR(45) NULL,
  `fax3` VARCHAR(45) NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_clients_users_idx` (`created_by` ASC),
  INDEX `FK_clients_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_clients_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_clients_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`providers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`providers` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `adress` VARCHAR(45) NULL,
  `email` VARCHAR(45) NULL,
  `website` VARCHAR(45) NULL,
  `tel` VARCHAR(45) NULL,
  `fax` VARCHAR(45) NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_providers_users_idx` (`created_by` ASC),
  INDEX `FK_providers_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_providers_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_providers_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`files`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`files` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `number` VARCHAR(45) NOT NULL,
  `startDate` DATE NULL,
  `canceled` TINYINT(1) NULL DEFAULT 0,
  `client_id` INT NOT NULL,
  `input_id` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `statut` INT NULL DEFAULT 0,
  `provider_id` INT NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_files_clients_idx` (`client_id` ASC),
  INDEX `FK_files_inputs_idx` (`input_id` ASC),
  UNIQUE INDEX `number_UNIQUE` (`number` ASC),
  INDEX `FK_files_providers_idx` (`provider_id` ASC),
  INDEX `FK_files_users_idx` (`created_by` ASC),
  INDEX `FK_files_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_files_clients`
    FOREIGN KEY (`client_id`)
    REFERENCES `DSD`.`clients` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_files_inputs`
    FOREIGN KEY (`input_id`)
    REFERENCES `DSD`.`inputs` (`id`)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `FK_files_providers`
    FOREIGN KEY (`provider_id`)
    REFERENCES `DSD`.`providers` (`id`)
    ON DELETE SET NULL
    ON UPDATE SET NULL,
  CONSTRAINT `FK_files_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_files_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`inputs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`inputs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATETIME NULL,
  `file_id` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_inputs_files_idx` (`file_id` ASC),
  INDEX `FK_inputs_users_idx` (`created_by` ASC),
  INDEX `FK_inputs_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_inputs_files`
    FOREIGN KEY (`file_id`)
    REFERENCES `DSD`.`files` (`id`)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `FK_inputs_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_inputs_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`lots`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`lots` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `number` VARCHAR(45) NOT NULL,
  `deadline` DATE NULL,
  `expectedQte` DOUBLE NULL DEFAULT 0,
  `actualQte` DOUBLE NULL DEFAULT 0,
  `product_id` INT NULL,
  `client_id` INT NULL,
  `zone_id` INT NULL,
  `input_id` INT NULL,
  `file_id` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `remainedQte` DOUBLE NULL DEFAULT 0,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_lots_products_idx` (`product_id` ASC),
  INDEX `FK_lots_clients_idx` (`client_id` ASC),
  INDEX `FK_lots_zones_idx` (`zone_id` ASC),
  INDEX `FK_lots_inputs_idx` (`input_id` ASC),
  INDEX `FK_lots_files_idx` (`file_id` ASC),
  UNIQUE INDEX `number_UNIQUE` (`number` ASC),
  INDEX `FK_lots_users_idx` (`created_by` ASC),
  INDEX `FK_lots_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_lots_products`
    FOREIGN KEY (`product_id`)
    REFERENCES `DSD`.`products` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_lots_clients`
    FOREIGN KEY (`client_id`)
    REFERENCES `DSD`.`clients` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_lots_zones`
    FOREIGN KEY (`zone_id`)
    REFERENCES `DSD`.`zones` (`id`)
    ON DELETE SET NULL
    ON UPDATE SET NULL,
  CONSTRAINT `FK_lots_inputs`
    FOREIGN KEY (`input_id`)
    REFERENCES `DSD`.`inputs` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_lots_files`
    FOREIGN KEY (`file_id`)
    REFERENCES `DSD`.`files` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_lots_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_lots_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`movements`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`movements` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `type` INT NOT NULL,
  `date` DATETIME NULL,
  `qte` DOUBLE NULL,
  `before_qte` DOUBLE NULL,
  `after_qte` DOUBLE NULL,
  `stock_id` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `lot_id` INT NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_movements_stocks_idx` (`stock_id` ASC),
  INDEX `FK_movements_lots_idx` (`lot_id` ASC),
  INDEX `FK_movements_users_idx` (`created_by` ASC),
  INDEX `FK_movements_users_idx1` (`modified_by` ASC),
  CONSTRAINT `FK_movements_stocks`
    FOREIGN KEY (`stock_id`)
    REFERENCES `DSD`.`stocks` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_movements_lots`
    FOREIGN KEY (`lot_id`)
    REFERENCES `DSD`.`lots` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_movements_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_movements_users`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`documents`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`documents` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(256) NOT NULL,
  `path` VARCHAR(256) NULL,
  `file_id` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `type` VARCHAR(255) NOT NULL,
  `version` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_documents_files_idx` (`file_id` ASC),
  INDEX `FK_documents_users_idx` (`created_by` ASC),
  INDEX `FK_documents_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_documents_files`
    FOREIGN KEY (`file_id`)
    REFERENCES `DSD`.`files` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_documents_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_documents_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`outputSets`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`outputSets` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `file_id` INT NOT NULL,
  `date` DATE NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `statut` INT NULL DEFAULT 0,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_outpuSets_files_idx` (`file_id` ASC),
  INDEX `FK_outputSets_users_idx` (`created_by` ASC),
  INDEX `FK_outputSets_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_outpuSets_files`
    FOREIGN KEY (`file_id`)
    REFERENCES `DSD`.`files` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_outputSets_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_outputSets_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`outputs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`outputs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `date` DATE NULL,
  `qte` DOUBLE NULL,
  `lot_id` INT NULL,
  `file_id` INT NULL,
  `outputSet_id` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_outputs_lots_idx` (`lot_id` ASC),
  INDEX `FK_outputs_files_idx` (`file_id` ASC),
  INDEX `FK_outputs_outputSets_idx` (`outputSet_id` ASC),
  INDEX `FK_outputs_users_idx` (`created_by` ASC),
  INDEX `FK_outputs_users_idx1` (`modified_by` ASC),
  CONSTRAINT `FK_outputs_lots`
    FOREIGN KEY (`lot_id`)
    REFERENCES `DSD`.`lots` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_outputs_files`
    FOREIGN KEY (`file_id`)
    REFERENCES `DSD`.`files` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_outputs_outputSets`
    FOREIGN KEY (`outputSet_id`)
    REFERENCES `DSD`.`outputSets` (`id`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK_outputs_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_outputs_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`required_docs`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`required_docs` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(255) NOT NULL,
  `type` INT NOT NULL,
  `modified` DATETIME NULL,
  `created` DATETIME NULL,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `name_UNIQUE` (`name` ASC),
  INDEX `FK_requiredDocs_users_idx` (`created_by` ASC),
  INDEX `FK_requiredDocs_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_requiredDocs_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_requiredDocs_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);


-- -----------------------------------------------------
-- Table `DSD`.`dependencies`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`dependencies` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `id_category1` INT NOT NULL,
  `id_category2` INT NOT NULL,
  `quota` DOUBLE NOT NULL DEFAULT 0,
  `tolerance` DOUBLE NULL DEFAULT 0,
  `created_by` INT NULL,
  `modified_by` INT NULL,
  `created` DATETIME NULL,
  `modified` DATETIME NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_dependencies_categories_idx` (`id_category1` ASC),
  INDEX `FK_dependencies_categories_id2_idx` (`id_category2` ASC),
  INDEX `FK_dependencies_users_idx` (`created_by` ASC),
  INDEX `FK_dependencies_users_m_idx` (`modified_by` ASC),
  CONSTRAINT `FK_dependencies_categories_id1`
    FOREIGN KEY (`id_category1`)
    REFERENCES `DSD`.`categories` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_dependencies_categories_id2`
    FOREIGN KEY (`id_category2`)
    REFERENCES `DSD`.`categories` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_dependencies_users`
    FOREIGN KEY (`created_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_dependencies_users_m`
    FOREIGN KEY (`modified_by`)
    REFERENCES `DSD`.`users` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `DSD`.`associations`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `DSD`.`associations` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `category_id` INT NULL,
  `product_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `FK_associations_products_idx` (`product_id` ASC),
  INDEX `FK_associations_categories_idx` (`category_id` ASC),
  CONSTRAINT `FK_associations_products`
    FOREIGN KEY (`product_id`)
    REFERENCES `DSD`.`products` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `FK_associations_categories`
    FOREIGN KEY (`category_id`)
    REFERENCES `DSD`.`categories` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
